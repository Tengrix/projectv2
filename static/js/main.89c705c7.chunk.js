(this.webpackJsonpprojectv2=this.webpackJsonpprojectv2||[]).push([[0],{47:function(e,t,r){},71:function(e,t,r){},72:function(e,t,r){"use strict";r.r(t);var n=r(0),s=r.n(n),o=r(21),a=r.n(o),i=(r(47),r(9)),c=r(4),l=r(26),d=r(3),u=r(6),j=r(40),b=r.n(j).a.create({baseURL:"https://neko-back.herokuapp.com/2.0/",withCredentials:!0}),p=function(e,t,r){return b.post("auth/login",{email:e,password:t,rememberMe:r})},O=function(e,t){return b.post("auth/register",{email:e,password:t})},h=function(){return b.post("auth/me")},m=function(e){return b.put("auth/me",{name:e})},f=function(){return b.delete("auth/me")},g=function(e,t,r){return b.post("auth/forgot",{email:e,from:t,message:r})},x=function(e,t){return b.post("auth/set-new-password",{password:e,resetPasswordToken:t})},w=r(25),v=Object(w.b)({name:"auth",initialState:{isLoggedIn:!1,isRegistered:!1,isInitialized:!1,user:{_id:"",email:"",name:"",avatar:""},updatedUser:{},isPassUpdated:!1,isPassSet:!1},reducers:{getLoginAC:function(e,t){e.isLoggedIn=t.payload.value},registerNewUser:function(e,t){e.isRegistered=t.payload.value},getMe:function(e,t){e.isInitialized=t.payload.value},getUpdatedUser:function(e,t){e.updatedUser=t.payload.name},getUser:function(e,t){e.user=t.payload.user},forgotPass:function(e,t){e.isPassUpdated=t.payload.value},setPass:function(e,t){e.isPassSet=t.payload.value}}}),y=v.actions,P=y.getLoginAC,S=y.registerNewUser,F=y.getMe,I=y.getUpdatedUser,A=y.getUser,U=y.forgotPass,L=y.setPass,k=v.reducer,R=r(1),Z=function(){var e=Object(d.b)(),t=Object(d.c)((function(e){return e.auth.isLoggedIn})),r=Object(d.c)((function(e){return e.auth.user})),s=Object(n.useState)(r.name),o=Object(l.a)(s,2),a=o[0],i=o[1],j=Object(n.useState)(!1),b=Object(l.a)(j,2),p=b[0],O=b[1],f=Object(n.useState)(!1),g=Object(l.a)(f,2),x=g[0],w=g[1];Object(n.useEffect)((function(){t||e((function(e){h().then((function(t){e(A({user:t.data}))})).catch((function(e){e.response?e.response.data.error:e.message,console.log("Error: ",Object(u.a)({},e))}))}))}),[e,t]);return t?Object(R.jsxs)("div",{children:[Object(R.jsx)("div",{children:Object(R.jsx)("img",{src:r.avatar,alt:""})}),x&&Object(R.jsx)("div",{children:p?Object(R.jsx)("input",{type:"text",value:a,autoFocus:!0,onBlur:function(){O(!1),e(function(e){return function(t){m(e).then((function(r){t(I({name:e}))})).catch((function(e){e.response?e.response.data.error:e.message,console.log("Error: ",Object(u.a)({},e))}))}}(a))},placeholder:"new name",onChange:function(e){i(e.currentTarget.value)}}):Object(R.jsx)("span",{onDoubleClick:function(){O(!0),i(r.name)},children:a})}),Object(R.jsx)("button",{onClick:function(){w(!x)},children:"show"})]}):Object(R.jsx)(c.a,{to:N.login})},E=r(17),C=function(){var e=Object(d.b)(),t=Object(d.c)((function(e){return e.auth.isLoggedIn})),r=Object(E.a)({initialValues:{email:"",password:"",rememberMe:!1},validate:function(e){var t={};return e.email?/^[A-Z0-9._%+-]+@[A-Z0-9.-]+\.[A-Z]{2,4}$/i.test(e.email)||(t.email="Invalid email address"):t.email="Required",e.password?e.password.length<4&&(t.password="Invalid password"):t.password="Required",t},onSubmit:function(t){var n,s,o;e((n=t.email,s=t.password,o=t.rememberMe,function(e){p(n,s,o).then((function(t){e(P({value:!0}))})).catch((function(e){e.response?e.response.data.error:e.message,console.log("Error: ",Object(u.a)({},e))}))})),r.resetForm()}});return t?Object(R.jsx)(c.a,{to:N.profile}):Object(R.jsx)("div",{children:Object(R.jsxs)("form",{onSubmit:r.handleSubmit,children:[Object(R.jsx)("input",Object(u.a)({type:"email",placeholder:"email"},r.getFieldProps("email"))),r.touched.email&&r.errors.email&&Object(R.jsx)("div",{style:{color:"red"},children:r.errors.email}),Object(R.jsx)("input",Object(u.a)({type:"password",placeholder:"password"},r.getFieldProps("password"))),r.touched.password&&r.errors.password&&Object(R.jsx)("div",{style:{color:"red"},children:r.errors.password}),Object(R.jsx)("input",Object(u.a)({type:"checkbox"},r.getFieldProps("rememberMe"))),Object(R.jsx)("button",{type:"submit",color:"primary",children:"Login"})]})})},M=function(){var e=Object(d.b)(),t=Object(d.c)((function(e){return e.auth.isRegistered})),r=Object(E.a)({initialValues:{email:"",password:""},validate:function(e){var t={};return e.email?/^[A-Z0-9._%+-]+@[A-Z0-9.-]+\.[A-Z]{2,4}$/i.test(e.email)||(t.email="Invalid email address"):t.email="Email is Required",e.password?e.password.length<4&&(t.password="Invalid password"):t.password="Password is Required",t},onSubmit:function(t){var n,s;r.resetForm(),e((n=t.email,s=t.password,function(e){O(n,s).then((function(t){e(S({value:!0}))})).catch((function(e){e.response?e.response.data.error:e.message,console.log("Error: ",Object(u.a)({},e))}))}))}});return t?Object(R.jsx)(c.a,{to:N.login}):Object(R.jsx)("div",{children:Object(R.jsxs)("form",{onSubmit:r.handleSubmit,children:[Object(R.jsx)("input",Object(u.a)({type:"email",placeholder:"email"},r.getFieldProps("email"))),r.touched.email&&r.errors.email&&Object(R.jsx)("div",{style:{color:"red"},children:r.errors.email}),Object(R.jsx)("input",Object(u.a)({type:"password",placeholder:"password"},r.getFieldProps("password"))),r.touched.password&&r.errors.password&&Object(R.jsx)("div",{style:{color:"red"},children:r.errors.password}),Object(R.jsx)("button",{type:"submit",color:"primary",children:"Register"})]})})},q=function(){return Object(R.jsx)("div",{})},T=function(){var e=Object(d.b)(),t=Object(E.a)({initialValues:{email:""},validate:function(e){var t={};e.email?/^[A-Z0-9._%+-]+@[A-Z0-9.-]+\.[A-Z]{2,4}$/i.test(e.email)||(t.email="Invalid email address"):t.email="Required"},onSubmit:function(r){var n,s,o;e((n=r.email,s="nya-admin@nya.nya",o="Please get new pass",function(e){g(n,s,o).then((function(t){e(U({value:!0}))}))})),t.resetForm()}});return Object(R.jsx)("div",{children:Object(R.jsxs)("form",{onSubmit:t.handleSubmit,action:"",children:[Object(R.jsx)("input",Object(u.a)({type:"email",placeholder:"email"},t.getFieldProps("email"))),t.touched.email&&t.errors.email&&Object(R.jsx)("div",{style:{color:"red"},children:t.errors.email}),Object(R.jsx)("button",{type:"submit",children:"Submit"})]})})},_=function(){var e=Object(c.g)().token,t=Object(d.b)(),r=Object(d.c)((function(e){return e.auth.isPassSet})),n=Object(E.a)({initialValues:{password:""},validate:function(e){var t={};e.password?/^[A-Z0-9._%+-]+@[A-Z0-9.-]+\.[A-Z]{2,4}$/i.test(e.password)||(t.password="Invalid email address"):t.password="Required"},onSubmit:function(r){t(function(e,t){return function(r){x(e,t).then((function(e){r(L({value:!0}))}))}}(r.password,e)),n.resetForm()}});return r?Object(R.jsx)(c.a,{to:"/login"}):Object(R.jsx)("div",{children:Object(R.jsxs)("form",{onSubmit:n.handleSubmit,action:"",children:[Object(R.jsx)("input",Object(u.a)({type:"password",placeholder:"password"},n.getFieldProps("password"))),n.touched.password&&n.errors.password&&Object(R.jsx)("div",{style:{color:"red"},children:n.errors.password}),Object(R.jsx)("button",{type:"submit",children:"Submit"})]})})},N={login:"/login",register:"/register",profile:"/profile",error:"/404",renew:"/renew",setPassword:"/set-pass/:token"},V=function(){return Object(R.jsx)("div",{children:Object(R.jsxs)(c.d,{children:[Object(R.jsx)(c.b,{path:"/",exact:!0,component:Z}),Object(R.jsx)(c.b,{path:N.profile,component:Z}),Object(R.jsx)(c.b,{path:N.login,component:C}),Object(R.jsx)(c.b,{path:N.register,component:M}),Object(R.jsx)(c.b,{path:N.error,component:q}),Object(R.jsx)(c.b,{path:N.renew,component:T}),Object(R.jsx)(c.b,{path:N.setPassword,component:_}),Object(R.jsx)(c.b,{path:"/404",render:function(){return Object(R.jsx)("h1",{children:"404:PAGE NOT FOUND"})}}),Object(R.jsx)(c.a,{from:"*",to:N.error})]})})},$=function(){var e=Object(d.c)((function(e){return e.auth.isLoggedIn}));return Object(R.jsx)("div",{children:e&&Object(R.jsxs)("nav",{children:[Object(R.jsx)("span",{children:Object(R.jsx)(i.b,{to:N.profile,replace:!0,children:"Profile"})}),Object(R.jsx)("span",{children:Object(R.jsx)(i.b,{to:N.login,replace:!0,children:"Login"})}),Object(R.jsx)("span",{children:Object(R.jsx)(i.b,{to:N.register,replace:!0,children:"Register"})}),Object(R.jsx)("span",{children:Object(R.jsx)(i.b,{to:N.renew,replace:!0,children:"renew pass"})}),Object(R.jsx)("span",{children:Object(R.jsx)(i.b,{to:N.setPassword,replace:!0,children:"set new pass"})})]})})};r(71);var z=function(){var e=Object(d.b)(),t=Object(d.c)((function(e){return e.auth.isInitialized})),r=Object(d.c)((function(e){return e.auth.isLoggedIn}));return Object(n.useEffect)((function(){e((function(e){h().then((function(t){e(P({value:!0})),e(A({user:t.data}))})).catch((function(e){e.response?e.response.data.error:e.message,console.log("Error: ",Object(u.a)({},e))})).finally((function(){e(F({value:!0}))}))}))}),[e]),t?Object(R.jsx)("div",{children:Object(R.jsxs)(i.a,{children:[r?Object(R.jsx)("button",{onClick:function(){e((function(e){f().then((function(t){e(P({value:!1}))})).catch((function(e){e.response?e.response.data.error:e.message,console.log("Error: ",Object(u.a)({},e))}))}))},children:"logout"}):Object(R.jsx)(c.a,{to:N.login}),Object(R.jsx)($,{}),Object(R.jsx)(V,{})]})}):Object(R.jsx)("div",{children:"loading"})},B=function(e){e&&e instanceof Function&&r.e(3).then(r.bind(null,73)).then((function(t){var r=t.getCLS,n=t.getFID,s=t.getFCP,o=t.getLCP,a=t.getTTFB;r(e),n(e),s(e),o(e),a(e)}))},D=r(13),J=r(20),G=Object(D.b)({auth:k}),H=Object(w.a)({reducer:G,middleware:function(e){return e().prepend(J.a)}});window.store=H,a.a.render(Object(R.jsx)(s.a.StrictMode,{children:Object(R.jsx)(d.a,{store:H,children:Object(R.jsx)(z,{})})}),document.getElementById("root")),B()}},[[72,1,2]]]);
//# sourceMappingURL=main.89c705c7.chunk.js.map