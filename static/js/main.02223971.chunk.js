(this.webpackJsonpprojectv2=this.webpackJsonpprojectv2||[]).push([[0],{49:function(e,t,r){},73:function(e,t,r){},74:function(e,t,r){"use strict";r.r(t);var s=r(0),n=r.n(s),o=r(23),a=r.n(o),i=(r(49),r(10)),c=r(5),d=r(28),l=r(4),u=r(8),j=r(42),b=r.n(j).a.create({baseURL:"https://neko-back.herokuapp.com/2.0/",withCredentials:!0}),p=function(e,t,r){return b.post("auth/login",{email:e,password:t,rememberMe:r})},h=function(e,t){return b.post("auth/register",{email:e,password:t})},m=function(){return b.post("auth/me")},O=function(e){return b.put("auth/me",{name:e})},f=function(){return b.delete("auth/me")},g=function(e,t,r){return b.post("auth/forgot",{email:e,from:t,message:r})},x=function(e,t){return b.post("auth/set-new-password",{password:e,resetPasswordToken:t})},w=r(27),v=Object(w.b)({name:"auth",initialState:{isLoggedIn:!1,isRegistered:!1,isInitialized:!1,user:{_id:"",email:"",name:"",avatar:""},updatedUser:{},isPassUpdated:!1,isPassSet:!1},reducers:{getLoginAC:function(e,t){e.isLoggedIn=t.payload.value},registerNewUser:function(e,t){e.isRegistered=t.payload.value},getMe:function(e,t){e.isInitialized=t.payload.value},getUpdatedUser:function(e,t){e.updatedUser=t.payload.name},getUser:function(e,t){e.user=t.payload.user},forgotPass:function(e,t){e.isPassUpdated=t.payload.value},setPass:function(e,t){e.isPassSet=t.payload.value}}}),y=v.actions,P=y.getLoginAC,S=y.registerNewUser,F=y.getMe,I=y.getUpdatedUser,A=y.getUser,U=y.forgotPass,k=y.setPass,L=v.reducer,R=r(1),Z=function(){var e=Object(l.b)(),t=Object(l.c)((function(e){return e.auth.isLoggedIn})),r=Object(l.c)((function(e){return e.auth.user})),n=Object(s.useState)(r.name),o=Object(d.a)(n,2),a=o[0],i=o[1],j=Object(s.useState)(!1),b=Object(d.a)(j,2),p=b[0],h=b[1],f=Object(s.useState)(!1),g=Object(d.a)(f,2),x=g[0],w=g[1];Object(s.useEffect)((function(){t||e((function(e){m().then((function(t){var r=t.data,s=r._id,n=r.name,o=r.email,a=r.avatar;e(A({user:{_id:s,name:n,email:o,avatar:a}}))})).catch((function(e){e.response?e.response.data.error:e.message,console.log("Error: ",Object(u.a)({},e))}))}))}),[]);return t?Object(R.jsxs)("div",{children:[Object(R.jsx)("div",{children:Object(R.jsx)("img",{src:r.avatar,alt:""})}),x&&Object(R.jsx)("div",{children:p?Object(R.jsx)("input",{type:"text",value:a,autoFocus:!0,onBlur:function(){h(!1),e(function(e){return function(t){O(e).then((function(r){t(I({name:e}))})).catch((function(e){e.response?e.response.data.error:e.message,console.log("Error: ",Object(u.a)({},e))}))}}(a))},placeholder:"new name",onChange:function(e){i(e.currentTarget.value)}}):Object(R.jsx)("span",{onDoubleClick:function(){h(!0),i(r.name)},children:a})}),Object(R.jsx)("button",{onClick:function(){w(!x)},children:"show"})]}):Object(R.jsx)(c.a,{to:T.login})},_=r(19),E=function(){var e=Object(l.b)(),t=Object(l.c)((function(e){return e.auth.isLoggedIn})),r=Object(_.a)({initialValues:{email:"",password:"",rememberMe:!1},validate:function(e){var t={};return e.email?/^[A-Z0-9._%+-]+@[A-Z0-9.-]+\.[A-Z]{2,4}$/i.test(e.email)||(t.email="Invalid email address"):t.email="Required",e.password?e.password.length<4&&(t.password="Invalid password"):t.password="Required",t},onSubmit:function(t){var s,n,o;e((s=t.email,n=t.password,o=t.rememberMe,function(e){p(s,n,o).then((function(t){e(P({value:!0}))})).catch((function(e){e.response?e.response.data.error:e.message,console.log("Error: ",Object(u.a)({},e))}))})),r.resetForm()}});return t?Object(R.jsx)(c.a,{to:T.profile}):Object(R.jsx)("div",{children:Object(R.jsxs)("form",{onSubmit:r.handleSubmit,children:[Object(R.jsxs)("div",{children:[Object(R.jsx)("input",Object(u.a)({type:"email",placeholder:"email"},r.getFieldProps("email"))),r.touched.email&&r.errors.email&&Object(R.jsx)("div",{style:{color:"red"},children:r.errors.email})]}),Object(R.jsxs)("div",{children:[Object(R.jsx)("input",Object(u.a)({type:"password",placeholder:"password"},r.getFieldProps("password"))),r.touched.password&&r.errors.password&&Object(R.jsx)("div",{style:{color:"red"},children:r.errors.password})]}),Object(R.jsx)("input",Object(u.a)({type:"checkbox"},r.getFieldProps("rememberMe"))),Object(R.jsx)("button",{type:"submit",color:"primary",children:"Login"})]})})},C=function(){var e=Object(l.b)(),t=Object(l.c)((function(e){return e.auth.isRegistered})),r=Object(_.a)({initialValues:{email:"",password:"",password_confirmation:""},validate:function(e){var t={};return e.email?/^[A-Z0-9._%+-]+@[A-Z0-9.-]+\.[A-Z]{2,4}$/i.test(e.email)||(t.email="Invalid email address"):t.email="Email is Required",e.password?e.password.length<4&&(t.password="Invalid password"):t.password="Password is Required",e.password_confirmation!==e.password&&(t.password="Passwords should match"),t},onSubmit:function(t){var s,n;r.resetForm(),e((s=t.email,n=t.password,function(e){h(s,n).then((function(t){e(S({value:!0}))})).catch((function(e){e.response?e.response.data.error:e.message,console.log("Error: ",Object(u.a)({},e))}))}))}});return t?Object(R.jsx)(c.a,{to:T.login}):Object(R.jsx)("div",{children:Object(R.jsxs)("form",{onSubmit:r.handleSubmit,children:[Object(R.jsxs)("div",{children:[Object(R.jsx)("input",Object(u.a)({type:"email",placeholder:"email"},r.getFieldProps("email"))),r.touched.email&&r.errors.email&&Object(R.jsx)("div",{style:{color:"red"},children:r.errors.email})]}),Object(R.jsxs)("div",{children:[Object(R.jsx)("input",Object(u.a)({type:"password",placeholder:"password"},r.getFieldProps("password"))),r.touched.password&&r.errors.password&&Object(R.jsx)("div",{style:{color:"red"},children:r.errors.password})]}),Object(R.jsxs)("div",{children:[Object(R.jsx)("input",Object(u.a)({type:"password",placeholder:"password"},r.getFieldProps("password"))),r.touched.password_confirmation&&r.errors.password_confirmation&&Object(R.jsx)("div",{style:{color:"red"},children:r.errors.password_confirmation})]}),Object(R.jsx)("button",{type:"submit",color:"primary",children:"Register"})]})})},M=function(){return Object(R.jsx)("div",{})},q=function(){var e=Object(l.b)(),t=Object(_.a)({initialValues:{email:""},validate:function(e){var t={};e.email?/^[A-Z0-9._%+-]+@[A-Z0-9.-]+\.[A-Z]{2,4}$/i.test(e.email)||(t.email="Invalid email address"):t.email="Required"},onSubmit:function(r){var s,n,o;e((s=r.email,n="nya-admin@nya.nya",o="Please get new pass",function(e){g(s,n,o).then((function(t){e(U({value:!0}))}))})),t.resetForm()}});return Object(R.jsx)("div",{children:Object(R.jsxs)("form",{onSubmit:t.handleSubmit,action:"",children:[Object(R.jsx)("input",Object(u.a)({type:"email",placeholder:"email"},t.getFieldProps("email"))),t.touched.email&&t.errors.email&&Object(R.jsx)("div",{style:{color:"red"},children:t.errors.email}),Object(R.jsx)("button",{type:"submit",children:"Submit"})]})})},N=function(){var e=Object(c.g)().token,t=Object(l.b)(),r=Object(l.c)((function(e){return e.auth.isPassSet})),s=Object(_.a)({initialValues:{password:""},validate:function(e){var t={};e.password?/^[A-Z0-9._%+-]+@[A-Z0-9.-]+\.[A-Z]{2,4}$/i.test(e.password)||(t.password="Invalid email address"):t.password="Required"},onSubmit:function(r){t(function(e,t){return function(r){x(e,t).then((function(e){r(k({value:!0}))}))}}(r.password,e)),s.resetForm()}});return r?Object(R.jsx)(c.a,{to:"/login"}):Object(R.jsx)("div",{children:Object(R.jsxs)("form",{onSubmit:s.handleSubmit,action:"",children:[Object(R.jsx)("input",Object(u.a)({type:"password",placeholder:"password"},s.getFieldProps("password"))),s.touched.password&&s.errors.password&&Object(R.jsx)("div",{style:{color:"red"},children:s.errors.password}),Object(R.jsx)("button",{type:"submit",children:"Submit"})]})})},T={login:"/login",register:"/register",profile:"/profile",error:"/404",renew:"/renew",setPassword:"/set-pass/:token"},V=function(){return Object(R.jsx)("div",{children:Object(R.jsxs)(c.d,{children:[Object(R.jsx)(c.b,{path:"/",exact:!0,component:Z}),Object(R.jsx)(c.b,{path:T.profile,component:Z}),Object(R.jsx)(c.b,{path:T.login,component:E}),Object(R.jsx)(c.b,{path:T.register,component:C}),Object(R.jsx)(c.b,{path:T.error,component:M}),Object(R.jsx)(c.b,{path:T.renew,component:q}),Object(R.jsx)(c.b,{path:T.setPassword,component:N}),Object(R.jsx)(c.b,{path:"/404",render:function(){return Object(R.jsx)("h1",{children:"404:PAGE NOT FOUND"})}}),Object(R.jsx)(c.a,{from:"*",to:T.error})]})})},$=r(76),z=r(77),B=r(78),D=function(){var e=Object(l.c)((function(e){return e.auth.isLoggedIn}));return Object(R.jsx)("div",{children:e&&Object(R.jsx)($.a,{color:"light",light:!0,expand:"md",children:Object(R.jsxs)(z.a,{className:"mr-auto",navbar:!0,children:[Object(R.jsx)(B.a,{children:Object(R.jsx)(i.b,{to:T.profile,children:"Profile"})}),Object(R.jsx)(B.a,{children:Object(R.jsx)(i.b,{to:T.login,children:"Sign In"})}),Object(R.jsx)(B.a,{children:Object(R.jsx)(i.b,{to:T.register,children:"Sign Up"})}),Object(R.jsx)(B.a,{children:Object(R.jsx)(i.b,{to:T.renew,children:"Renew Password"})}),Object(R.jsx)(B.a,{children:Object(R.jsx)(i.b,{to:T.setPassword,children:"Set Password"})})]})})})};r(73);var J=function(){var e=Object(l.b)(),t=Object(l.c)((function(e){return e.auth.isInitialized})),r=Object(l.c)((function(e){return e.auth.isLoggedIn}));return Object(s.useEffect)((function(){e((function(e){m().then((function(t){e(P({value:!0})),e(A({user:t.data}))})).catch((function(e){e.response?e.response.data.error:e.message,console.log("Error: ",Object(u.a)({},e))})).finally((function(){e(F({value:!0}))}))}))}),[e]),t?Object(R.jsx)("div",{children:Object(R.jsxs)(i.a,{children:[r?Object(R.jsx)("button",{onClick:function(){e((function(e){f().then((function(t){e(P({value:!1}))})).catch((function(e){e.response?e.response.data.error:e.message,console.log("Error: ",Object(u.a)({},e))}))}))},children:"logout"}):Object(R.jsx)(c.a,{to:T.login}),Object(R.jsx)(D,{}),Object(R.jsx)(V,{})]})}):Object(R.jsx)("div",{children:"loading"})},G=function(e){e&&e instanceof Function&&r.e(3).then(r.bind(null,79)).then((function(t){var r=t.getCLS,s=t.getFID,n=t.getFCP,o=t.getLCP,a=t.getTTFB;r(e),s(e),n(e),o(e),a(e)}))},H=r(14),K=r(22),Q=Object(H.b)({auth:L}),W=Object(w.a)({reducer:Q,middleware:function(e){return e().prepend(K.a)}});window.store=W,a.a.render(Object(R.jsx)(n.a.StrictMode,{children:Object(R.jsx)(l.a,{store:W,children:Object(R.jsx)(J,{})})}),document.getElementById("root")),G()}},[[74,1,2]]]);
//# sourceMappingURL=main.02223971.chunk.js.map